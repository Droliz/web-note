## 什么是keep-alive

Vue的一个内置组件，包裹组件的时候，会缓存不活跃的组件实例，并不是销毁他们

作用：把组件切换的状态保存在内存里，防止重复渲染DOM节点，减少加载时间和性能消耗，提高用户体验

可以用于提高性能

## 原理


在Vue中，就体现为，始终将该组件保留在虚拟DOM中，并且保持该组件以及后代组件的状态，只不过不渲染而已了，这里敲下黑板，注意一下，是**始终将该组件保留在虚拟DOM中，并且保持该组件以及后代组件的状态**但是不渲染了


## 选择性缓存组件

在 `keep-alive` 标签上，存在两个属性
- **include**：包含，包含在这个集合或者用正则匹配到的name值的组件**会被缓存**
- **exclude**：排查，包含在这个集合或者用正则匹配到的name值的组件**不会被缓存**

并且官方还提供了三种匹配模式，分别是：**数组、逗号隔开的字符串和正则表达式**

```html
<keep-alive include="a,b">
	<router-view></router-view>
</keep-alive>

<keep-alive :include="/a|b/">
	<router-view></router-view>
</keep-alive>

<keep-alive :include="['a', 'b']">
	<component :is='view'></component>
</keep-alive>
```

## 生命周期

```js
export default {
	activated() {
	    // 在首次挂载、
	    // 以及每次从缓存中被重新插入的时候调用
	},
	deactivated() {
		// 在从 DOM 上移除、进入缓存
		// 以及组件卸载时调用
	}
}
```

## keep-alive设置最大缓存

`keep-alive` 标签有一个 `max` 属性，传入的是一个 `number` 数据类型，根据数字大小来缓存一个最大缓存组件的上限，像这样用

```html
<keep-alive :max='10'></keep-alive>
```

当到达缓存组件上限之后会移除最先缓存的第一个组件，并把新的缓存组件推入堆顶

数字表示为： $1$ 到 $10$ 是 $10$ 个缓存的组件，当出现第 $11$ 个需要缓存的组件的时候，会把 $10$ 移除，然后 $9$ 变成 $10$，$8$ 变成 $9$，$7$ 变成 $8$...依次类推，然后 $11$ 变成了 $1$ 放在堆顶，就又保持了 $1$ 到 $10$ 的限制。

